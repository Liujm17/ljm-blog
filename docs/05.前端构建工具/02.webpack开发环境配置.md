---
title: 02.webpackå¼€å‘ç¯å¢ƒé…ç½®
sidebar: auto
date: 2021-08-21 00:00:00
tags:
  - webpckå¼€å‘ç¯å¢ƒé…ç½®
categories:
  - å‰ç«¯æ„å»ºå·¥å…·
---

:::tip
webpack äº”å¤§æ ¸å¿ƒ

1. Entry:å…¥å£ï¼ŒæŒ‡ç¤º `webpack` ä»¥å“ªä¸ªæ–‡ä»¶ä¸ºå…¥å£èµ·ç‚¹å¼€å§‹æ‰“åŒ…ï¼Œåˆ†ææ„å»ºå†…éƒ¨ä¾èµ–å›¾(ast æ ‘)
2. Output:è¾“å‡ºï¼ŒæŒ‡ç¤º `webpack` æ‰“åŒ…åçš„èµ„æº bundles è¾“å‡ºåˆ°å“ªä¸ªæ–‡ä»¶å¤¹ä¸‹
3. Loader:è®© `webpack` å¤„ç†é‚£äº›é js æ–‡ä»¶(webpack è‡ªèº«åªèƒ½ç†è§£ js)
4. Plugins:æ’ä»¶å¯ä»¥ç”¨äºæ‰§è¡ŒèŒƒå›´æ›´å¹¿çš„ä»»åŠ¡ï¼ŒåŒ…æ‹¬æ‰“åŒ…ä¼˜åŒ–ï¼Œè¾“å‡ºä¼˜åŒ–ï¼Œæ‰“åŒ…å‹ç¼©ç­‰ç­‰
5. Mode:`webpack` æ‰“åŒ…æ¨¡å¼ï¼Œ`development`ä¸ºå¼€å‘æ¨¡å¼,`production`ä¸ºç”Ÿäº§æ¨¡å¼
:::

## å¼€å‘ç¯å¢ƒåŸºæœ¬é…ç½®æ‰€éœ€ä¾èµ–

1. `webpack` å’Œ `webpack-cli` </br>
   webpack çš„æ¡†æ¶

2. `css-loader`,`style-loader`,`sass-loader`</br>
   loaderï¼Œç”¨äºåŒ¹é… sass å’Œ css æ–‡ä»¶è½¬æ¢æˆ`commonjs`æ¨¡å—é€šè¿‡`style`å¼•ç”¨åˆ°`head`ä¸­å»

3. `html-webpack-plugin`å¤åˆ¶ html æ¨¡ç‰ˆåˆ°è¾“å‡ºæ–‡ä»¶å¤¹ï¼Œå¹¶å¼•ç”¨æ‰“åŒ…çš„ js æ–‡ä»¶

```js
 module.exports = {{
   plugins: [
    // pluginsçš„é…ç½®
    // html-webpack-plugin
    // åŠŸèƒ½ï¼šé»˜è®¤ä¼šåˆ›å»ºä¸€ä¸ªç©ºçš„HTMLï¼Œè‡ªåŠ¨å¼•å…¥æ‰“åŒ…è¾“å‡ºçš„æ‰€æœ‰èµ„æºï¼ˆJS/CSSï¼‰(åœ¨ä¸åŠ templateå±æ€§çš„æƒ…å†µä¸‹)
    // éœ€æ±‚ï¼šéœ€è¦æœ‰ç»“æ„çš„HTMLæ–‡ä»¶
    new HtmlWebpackPlugin({
      // å¤åˆ¶ './src/index.html' æ–‡ä»¶ï¼Œå¹¶è‡ªåŠ¨å¼•å…¥æ‰“åŒ…è¾“å‡ºçš„æ‰€æœ‰èµ„æºï¼ˆJS/CSSï¼‰
      template: './src/index.html'
    })
  ],
 }
```

4. `url-loader`,`file-loader`,`html-loader`æ‰“åŒ…å›¾ç‰‡èµ„æº</br>

```js
moudle.exports = {
  module: {
    rules: [
      {
        // é—®é¢˜ï¼šé»˜è®¤å¤„ç†ä¸äº†htmlä¸­imgå›¾ç‰‡
        // å¤„ç†å›¾ç‰‡èµ„æº
        test: /\.(jpg|png|gif)$/,
        // ä½¿ç”¨ä¸€ä¸ªloader
        // ä¸‹è½½ 1.ğŸurl-loader 2.ğŸfile-loader
        loader: "url-loader",
        options: {
          // å›¾ç‰‡å¤§å°å°äº8kbï¼Œå°±ä¼šè¢«base64å¤„ç†
          // ä¼˜ç‚¹: å‡å°‘è¯·æ±‚æ•°é‡ï¼ˆå‡è½»æœåŠ¡å™¨å‹åŠ›ï¼‰
          // ç¼ºç‚¹ï¼šå›¾ç‰‡ä½“ç§¯ä¼šæ›´å¤§ï¼ˆæ–‡ä»¶è¯·æ±‚é€Ÿåº¦æ›´æ…¢ï¼‰
          limit: 8 * 1024,
          // é—®é¢˜ï¼šå› ä¸ºurl-loaderé»˜è®¤ä½¿ç”¨es6æ¨¡å—åŒ–è§£æï¼Œè€Œhtml-loaderå¼•å…¥å›¾ç‰‡æ˜¯commonjs
          // è§£ææ—¶ä¼šå‡ºé—®é¢˜ï¼š[object Module]
          // è§£å†³ï¼šå…³é—­url-loaderçš„es6æ¨¡å—åŒ–ï¼Œä½¿ç”¨commonjsè§£æ
          esModule: false,
          // ç»™å›¾ç‰‡è¿›è¡Œé‡å‘½å
          // [hash:10]å–å›¾ç‰‡çš„hashçš„å‰10ä½
          // [ext]å–æ–‡ä»¶åŸæ¥æ‰©å±•å
          name: "[hash:10].[ext]",
        },
      },
      {
        test: /\.html$/,
        // å¤„ç†htmlæ–‡ä»¶çš„imgå›¾ç‰‡ï¼ˆè´Ÿè´£å¼•å…¥imgï¼Œä»è€Œèƒ½è¢«url-loaderè¿›è¡Œå¤„ç†ï¼‰
        loader: "html-loader",
      },
    ],
  },
};
```

5. `webpack-dev-server`

```js
moudle.exports = {
  // å¼€å‘æœåŠ¡å™¨ devServerï¼šç”¨æ¥è‡ªåŠ¨åŒ–ï¼ˆè‡ªåŠ¨ç¼–è¯‘ï¼Œè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼Œè‡ªåŠ¨åˆ·æ–°æµè§ˆå™¨~~ï¼‰
  // ç‰¹ç‚¹ï¼šåªä¼šåœ¨å†…å­˜ä¸­ç¼–è¯‘æ‰“åŒ…ï¼Œä¸ä¼šæœ‰ä»»ä½•è¾“å‡º,ä¸ä¼šç”Ÿæˆbuildæ–‡ä»¶å¤¹
  // å¯åŠ¨devServeræŒ‡ä»¤ä¸ºï¼šnpx webpack-dev-server
  devServer: {
    // é¡¹ç›®æ„å»ºåè·¯å¾„
    contentBase: resolve(__dirname, "build"),
    // å¯åŠ¨gzipå‹ç¼©
    compress: true,
    // ç«¯å£å·
    port: 3000,
    // è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
    open: true,
  },
};
```
